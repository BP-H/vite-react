/* =========================
   Theme + Base
   ========================= */
:root{
  --bg:#0a0b10;
  --panel:#0f1117;
  --panel2:#10131a;
  --card:#11131d;
  --stroke:#1c2130;
  --text:#e9ecf1;
  --muted:#a1a7b3;
  --brand:#ff2db8;
  --brand2:#ff74de;
  --ring:rgba(255,45,184,.35);
  --radius:16px;
  --shadow:0 20px 60px rgba(0,0,0,.35);
}

*{ box-sizing:border-box }
html,body,#root{ height:100% }

body{
  margin:0;
  color:var(--text);
  font-family:Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto;
  /* Pink nebula background */
  background:
    radial-gradient(120% 100% at -20% -20%, rgba(255,75,208,.18), transparent 60%),
    linear-gradient(180deg,#0f1117,#10131a);
}

/* Keep 3D visible; shell overlays stay transparent */
.apple-white-bg{ background: transparent !important; }

/* =========================================
   Feed — centered like Instagram/LinkedIn
   ========================================= */
.feed-frame{
  position: relative; z-index: 1;
  display: flex; justify-content: center;
  padding: 18px 20px 80px;
}

.feed-col{
  width: min(720px, 100%);          /* full width on mobile, 720 max on desktop */
  display: flex; flex-direction: column;
  gap: 10px;                         /* the “thin line” between posts is simply background */
}

/* Frosted post card; the gap shows the page background (ultra thin line) */
.post-card{
  border-radius: 16px;
  border: 1px solid #202637;
  background: rgba(18,22,35,.55);
  backdrop-filter: blur(14px) saturate(150%);
  box-shadow: 0 12px 30px rgba(0,0,0,.25);
  overflow: hidden;
}

.post-head{
  display:flex; align-items:center; gap:10px;
  padding:12px 14px; border-bottom:1px solid rgba(255,255,255,.06);
}
.post-head .avatar{
  width:36px; height:36px; border-radius:999px; overflow:hidden;
  border:1px solid #202637; background:#121423;
}
.post-head .meta{ display:flex; flex-direction:column; line-height:1.15; }
.post-head .meta .name{ font-weight:800; }
.post-head .meta .sub{ font-size:12px; opacity:.75; }

.post-media img, .post-media video, .post-media canvas{
  width:100%; display:block; background:#0f1117;
}
.post-body{ padding:12px 14px; }

/* Engagement row + modern pills */
.post-engage{
  display:flex; align-items:center; gap:10px; padding:10px 12px;
  border-top:1px solid rgba(255,255,255,.06);
}
.pill{
  --bd: rgba(255,255,255,.14);
  --bg: #111423;
  --hover: rgba(255,75,208,.18);
  display:inline-flex; align-items:center; gap:8px;
  height:34px; padding:0 12px; border-radius:999px; border:1px solid var(--bd);
  background:var(--bg); color:#e9ecf1; font-weight:600; cursor:pointer;
  transition: box-shadow .15s, border-color .15s, transform .1s;
}
.pill:hover{
  border-color: rgba(255,75,208,.45);
  box-shadow:0 0 0 2px var(--hover) inset, 0 8px 20px rgba(0,0,0,.18);
  transform: translateY(-1px);
}

/* =========================================
   Overlay Sidebar (snv2) — pink, modern
   - collapsed: tiny icon rail (72px)
   - expanded: glassy panel, slides over feed
   ========================================= */
.snv2{
  position: fixed; left: 12px; top: 12px; bottom: 12px; z-index: 80;
  width: 340px; min-width: 340px; padding:14px; box-sizing: border-box;
  overflow: auto;
  border: 1px solid var(--stroke);
  border-radius: 18px;
  background:
    radial-gradient(120% 100% at -20% -20%, rgba(255,75,208,.16), transparent 60%),
    linear-gradient(180deg, rgba(17,19,29,.85), rgba(17,19,29,.72));
  backdrop-filter: blur(16px) saturate(160%);
  box-shadow: 0 20px 60px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.05);
  transition: width .28s ease, min-width .28s ease, box-shadow .25s ease, transform .25s ease;
}

/* When collapsed, becomes a tiny icon rail that doesn't push the feed */
.snv2.collapsed{
  width: 72px; min-width: 72px; padding:12px 10px;
  border-radius: 16px;
  transform: translateX(0);  /* keep stable; just thinner */
}

/* Toggle chip (top right of panel) */
.snv2 .snv2-toggle{
  position:absolute; right:10px; top:10px;
  width:34px; height:34px; border-radius:999px; border:1px solid var(--stroke);
  background:linear-gradient(180deg,#141827,#121423);
  box-shadow:0 6px 20px rgba(0,0,0,.25); cursor:pointer;
}
.snv2 .snv2-toggle::before{
  content:""; display:block; width:10px; height:10px; margin:12px auto;
  border-top:2px solid #fff; border-right:2px solid #fff; transform:rotate(45deg); opacity:.7;
}
.snv2.collapsed .snv2-toggle::before{ transform:rotate(-135deg); }

/* Brand bar (pink, subtle glow) */
.snv2 .snv2-brand{
  width:100%; height:44px; border-radius:14px; border:1px solid var(--stroke);
  background:
    radial-gradient(140% 140% at 20% 20%, #fff, #ffd8f4 60%, #ffc6ee) padding-box,
    linear-gradient(135deg, rgba(255,102,214,.60), rgba(255,161,230,.15)) border-box;
  color:#0f1117; font-weight:900; display:flex; align-items:center; gap:10px; justify-content:center;
  box-shadow:0 10px 40px rgba(255,75,208,.20), inset 0 1px 0 rgba(255,255,255,.65);
}
.snv2 .snv2-brand .orb{
  width:16px; height:16px; border-radius:999px;
  background:radial-gradient(120% 120% at 30% 30%, #fff, var(--brand2) 70%, var(--brand));
  box-shadow:0 0 0 5px rgba(255,75,208,.25), 0 6px 18px rgba(255,75,208,.30);
}
.snv2.collapsed .snv2-brand .text{ display:none; }

/* Avatar + hero card pop */
.snv2 .snv2-hero{ margin:12px 0 8px; }
.snv2 .snv2-hero .avatar{
  width:64px; height:64px; border-radius:999px; border:1px solid var(--stroke);
  overflow:hidden; background:#121423;
  box-shadow:0 10px 24px rgba(0,0,0,.35), 0 0 0 6px rgba(255,75,208,.10);
  cursor:pointer;
}
.snv2 .snv2-hero .avatar img{ width:100%; height:100%; object-fit:cover; display:block; }

.snv2 .hero-card{
  margin-top:10px; border:1px solid var(--stroke); border-radius:16px; padding:12px;
  background:rgba(20,22,34,.70); backdrop-filter: blur(16px) saturate(140%);
  transition:max-height .35s ease, opacity .25s ease, transform .25s ease;
  max-height:0; opacity:0; overflow:hidden; transform:translateY(-6px);
}
.snv2.open .hero-card{ max-height:220px; opacity:1; transform:translateY(0); }
.snv2 .name{ font-weight:900; }
.snv2 .sub{ color:#9aa3b2; font-size:12px; margin-top:2px; }
.snv2 .metrics{ display:flex; gap:10px; margin-top:8px; }
.snv2 .metrics div{
  flex:1; text-align:center; border:1px solid var(--stroke); border-radius:12px; padding:8px 10px; background:#111423;
}
.snv2 .metrics strong{ display:block; font-weight:900; }
.snv2 .metrics span{ font-size:11px; color:#9aa3b2; }

/* Labels, inputs, toggles inside panel */
.snv2 .section{ font-size:.8rem; color:#b9c0cf; margin:12px 2px 6px; }
.snv2 .label{ font-size:12px; color:#a4adbd; margin:4px 2px; display:block; }
.snv2 .input{
  width:100%; height:40px; border-radius:12px;
  background:#141828; color:#fff; border:1px solid var(--stroke);
  padding:0 12px; margin:4px 0 10px; outline:none; transition:border-color .15s, box-shadow .15s;
}
.snv2 .input:focus{ border-color:rgba(255,75,208,.6); box-shadow:0 0 0 4px rgba(255,75,208,.2); }
.snv2 .api{ display:flex; gap:8px; align-items:center; }
.snv2 .api .icon{
  width:40px; height:40px; border-radius:12px; border:1px solid var(--stroke); background:#131726; color:#fff;
}
.snv2 .api .icon.danger{ color:#ffb4d6; border-color:#3a2233; }
.snv2 .toggle{ display:flex; align-items:center; gap:8px; margin:6px 0 10px; font-size:14px; color:#e5e7eb; }

/* Nav buttons */
.snv2 .btn{
  width:100%; height:40px; border-radius:12px; text-align:left; padding-left:12px;
  background:#121626; color:#e5e7eb; border:1px solid var(--stroke); font-weight:600; margin:4px 0; cursor:pointer;
  transition: transform .12s, box-shadow .2s, border-color .15s;
  display:flex; align-items:center; gap:10px; justify-content:flex-start;
}
.snv2 .btn:hover{
  transform: translateY(-1px);
  border-color: rgba(255,75,208,.5);
  box-shadow: 0 0 0 2px rgba(255,75,208,.18) inset, 0 8px 24px rgba(0,0,0,.28);
}
.snv2 .btn.ghost{ opacity:.85 }
.snv2 .divider{ height:1px; background:var(--stroke); margin:12px 0; }
.snv2 .subheader{ font-weight:700; margin:10px 2px 4px; }
.snv2 .caption{ color:#98a2b3; font-size:12px; margin-top:6px; line-height:1.35; }

/* Collapsed rail — center icons, hide text */
.snv2.collapsed .btn{ justify-content:center; padding-left:0; font-size:18px; }
.snv2.collapsed .btn span{ display:none; }
.snv2.collapsed .section,
.snv2.collapsed .label,
.snv2.collapsed .api,
.snv2.collapsed .input,
.snv2.collapsed .toggle,
.snv2.collapsed .divider,
.snv2.collapsed .subheader,
.snv2.collapsed .caption{ display:none !important; }

/* =========================================
   World UI / Bottombar
   ========================================= */
.world-topbar{ display:none !important; }
.world-bottombar{
  position:fixed; left:12px; right:12px; bottom:12px; z-index:5;
  display:flex; align-items:center; gap:10px;
  padding:8px 10px; border-radius:12px;
  background:rgba(10,12,20,.55); color:#fff;
  backdrop-filter: blur(10px) saturate(140%);
}
.world-bottombar .crumb{ opacity:.8; font-size:12px }

/* =========================================
   Portal (white burst)
   ========================================= */
.portal-overlay{
  position:fixed; inset:0; pointer-events:none; z-index:9999;
  --px:50vw; --py:50vh; --r0:0px;
  background: radial-gradient(circle at var(--px) var(--py),
    rgba(255,255,255,1) 0,
    rgba(255,255,255,1) 60%,
    rgba(255,255,255,.98) 70%,
    rgba(255,255,255,0) 71%);
  clip-path: circle(var(--r0) at var(--px) var(--py));
  opacity:0;
  transition: clip-path .65s cubic-bezier(.22,.61,.36,1), opacity .2s ease;
}
.portal-overlay.on{ --r0:160vmax; opacity:1; }

/* =========================================
   Assistant Orb
   ========================================= */
/* Positioned via left/top from JS. No bottom/right/inset here. */
.assistant-orb{
  position:fixed; z-index:9998; width:56px; height:56px; border-radius:999px;
  border:1px solid rgba(255,255,255,.15);
  background:radial-gradient(120% 120% at 30% 30%, #67e8f9, #22d3ee 60%, #0ea5e9 100%); /* cooler cyan; spheres handle own colors */
  box-shadow:0 12px 40px rgba(14,165,233,.35), inset 0 1px 0 rgba(255,255,255,.5);
  transform:translate(-50%,-50%);
  transition:left .6s cubic-bezier(.22,.61,.36,1), top .6s cubic-bezier(.22,.61,.36,1), filter .2s;
  display:grid; place-items:center; cursor:pointer;
}
.assistant-orb:hover{ box-shadow:0 14px 44px rgba(14,165,233,.5), inset 0 1px 0 rgba(255,255,255,.7); }
.assistant-orb.mic{ filter:drop-shadow(0 0 18px rgba(106,115,255,.6)); }
.assistant-orb.flying{ pointer-events:none; filter:saturate(150%); }
.assistant-orb__core{
  width:26px; height:26px; border-radius:50%;
  background:radial-gradient(circle at 30% 30%, #fff, #a5f3fc 60%, #67e8f9);
  box-shadow:inset 0 0 30px rgba(255,255,255,.45); filter:blur(.2px);
}
.assistant-orb__ring{ position:absolute; width:64px; height:64px; border-radius:999px; box-shadow:0 0 0 6px rgba(106,115,255,.12); }
.assistant-orb.mic .assistant-orb__ring{ animation: ping 1.4s ease-out infinite; }
@keyframes ping{ 0%{ box-shadow:0 0 0 0 rgba(106,115,255,.25);} 100%{ box-shadow:0 0 0 28px rgba(106,115,255,0);} }

/* Tiny toast over the orb */
.assistant-orb__toast{
  position:absolute; bottom:70px; left:50%; transform:translateX(-50%);
  white-space:nowrap; padding:6px 8px; border-radius:8px;
  background:rgba(0,0,0,.65); color:#fff; font-size:12px;
  box-shadow:0 8px 20px rgba(0,0,0,.25); pointer-events:none;
}

/* Prevent background canvas from stealing clicks */
.bg-void canvas, .apple-white-bg > canvas { pointer-events:none !important; }

/* =========================================
   Chat Dock (bottom-center)
   ========================================= */
.chatdock{
  position: fixed; left: 50%; bottom: 88px; transform: translateX(-50%);
  width: min(680px, 92vw);
  z-index: 60;
  border: 1px solid rgba(0,0,0,.15);
  border-radius: 14px;
  background: rgba(20,22,32,.75);
  color: #fff;
  backdrop-filter: blur(10px) saturate(140%);
  box-shadow: 0 20px 40px rgba(0,0,0,.25);
}
.chatdock__head{ display:flex; align-items:center; justify-content:space-between; padding:8px 10px; border-bottom:1px solid rgba(255,255,255,.08) }
.chatdock__head .title{ font-weight:700; font-size:13px; opacity:.9 }
.chatdock__head .x{ background:transparent; border:0; color:#fff; font-size:18px; cursor:pointer; opacity:.7 }
.chatdock__head .x:hover{ opacity:1 }
.chatdock__body{ max-height: 240px; overflow:auto; padding:10px; display:grid; gap:8px }
.bubble{
  padding:8px 10px; border-radius:10px; max-width: 85%;
  white-space: pre-wrap; word-wrap: break-word;
}
.bubble.user{ justify-self: end; background: rgba(99,102,241,.25); border: 1px solid rgba(99,102,241,.35); }
.bubble.assistant{ justify-self: start; background: rgba(255,255,255,.08); border: 1px solid rgba(255,255,255,.12); }
.bubble.system{ justify-self: center; font-size: 12px; opacity: .8 }

.chatdock-pill{
  position: fixed; left: 50%; bottom: 88px; transform: translateX(-50%);
  z-index: 60; border: 1px solid rgba(0,0,0,.15); border-radius: 999px;
  padding: 8px 12px; background: rgba(20,22,32,.75); color: #fff; cursor: pointer;
  backdrop-filter: blur(10px) saturate(140%); box-shadow: 0 8px 20px rgba(0,0,0,.25);
}